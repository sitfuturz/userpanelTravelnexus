<div class="event-container">
  <!-- Header Section -->
  <div class="event-header">
    <h1 class="page-title">Events</h1>
    <div class="header-controls">
      <div class="filter-container">
        <button 
          class="filter-btn" 
          [class.active]="activeFilter === 'upcoming'"
          (click)="switchFilter('upcoming')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12,6 12,12 16,14"/>
            </svg>
          Upcoming
        </button>
        <div class="filter-separator"></div>
        <button 
          class="filter-btn" 
          [class.active]="activeFilter === 'recent'"
          (click)="switchFilter('recent')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
          Recent
        </button>
        <div class="filter-separator"></div>
        <button 
          class="filter-btn" 
          [class.active]="activeFilter === 'all'"
          (click)="switchFilter('all')">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
              <polyline points="9,22 9,12 15,12 15,22"/>
            </svg>
          All Events
        </button>
      </div>
    </div>
  </div>

  <!-- Events Container -->
  <div class="events-container">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="spinner"></div>
      <p>Loading events...</p>
    </div>

    <!-- Events List -->
    <div *ngIf="!isLoading" class="events-list">
      <div 
        *ngFor="let event of filteredEvents; trackBy: trackByEventId" 
        class="event-card"
        (click)="openDetailModal(event)">
        
        <!-- Event Image -->
        <div class="event-image">
          <img 
            [src]="getEventImage(event)"
            [alt]="event.title"
            class="event-thumbnail"
            onerror="this.src='assets/images/placeholder-image.png'">
          
          <!-- Event Type Badge -->
          <div class="event-type-badge" [class]="event.eventType">
            {{ formatEventType(event.eventType) }}
          </div>
          
          <!-- Pricing Badge -->
          <div *ngIf="getEventPricing(event)" class="pricing-badge">
            <span class="price-label">From</span>
            <span class="price-amount">â‚¹{{ getEventPricing(event)?.ticketPrice }}</span>
          </div>
        </div>

        <!-- Event Info -->
        <div class="event-info">
          <h3 class="event-title">{{ event.title }}</h3>
          
          <p class="event-description" *ngIf="event.description">
            {{ event.description.length > 120 ? (event.description.substring(0, 120) + '...') : event.description }}
          </p>
          
          <div class="event-meta">
            <div class="meta-item">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              <span>{{ formatDate(event.startDate) }}</span>
            </div>
            
            <div class="meta-item" *ngIf="event.startTime">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
              </svg>
              <span>{{ formatTime(event.startTime) }}</span>
            </div>
            
            <div class="meta-item" *ngIf="event.location">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
              <span>{{ event.location }}</span>
            </div>

            <div class="meta-item" *ngIf="event.stayOption">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9,22 9,12 15,12 15,22"/>
              </svg>
              <span>Stay Available</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="filteredEvents.length === 0" class="empty-state">
        <div class="empty-icon">ðŸ“…</div>
        <h3>No {{ activeFilter }} events found</h3>
        <p>There are no events matching your filter at the moment.</p>
      </div>
    </div>
  </div>
</div>

<!-- Event Detail Modal -->
<div *ngIf="showDetailModal && selectedEvent" class="modal-overlay" (click)="closeDetailModal()">
  <div class="modal-container detail-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div class="modal-title-section">
        <h2>{{ selectedEvent.title }}</h2>
        <div class="modal-meta">
          <span class="event-type-label" [class]="selectedEvent.eventType">
            {{ formatEventType(selectedEvent.eventType) }}
          </span>
          <span class="date-label">{{ formatDate(selectedEvent.startDate) }}</span>
        </div>
      </div>
      <button class="close-btn" (click)="closeDetailModal()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
    
    <div class="modal-body">
      <!-- Event Banner Image -->
      <div class="event-detail-image" *ngIf="selectedEvent.bannerImage">
        <img [src]="getEventImage(selectedEvent)" [alt]="selectedEvent.title"   onerror="this.src='assets/images/placeholder-image.png'" class="detail-thumbnail">
      </div>

      <!-- Event Details -->
      <div class="event-details-section">
        <!-- Description -->
        <div class="detail-item" *ngIf="selectedEvent.description">
          <span class="detail-label">Description</span>
          <span class="detail-value description">{{ selectedEvent.description }}</span>
        </div>

        <!-- Date and Time -->
        <div class="detail-item">
          <span class="detail-label">Date & Time</span>
          <div class="detail-value">
            <span>{{ formatDate(selectedEvent.startDate) }}</span>
            <span *ngIf="selectedEvent.endDate !== selectedEvent.startDate">
              - {{ formatDate(selectedEvent.endDate) }}
            </span>
            <span *ngIf="selectedEvent.startTime && selectedEvent.endTime" class="time-range">
              {{ formatTime(selectedEvent.startTime) }} - {{ formatTime(selectedEvent.endTime) }}
            </span>
          </div>
        </div>
        
        <!-- Location -->
        <div class="detail-item" *ngIf="selectedEvent.location">
          <span class="detail-label">Location</span>
          <span class="detail-value">{{ selectedEvent.location }}</span>
        </div>

        <!-- Venue -->
        <div class="detail-item" *ngIf="selectedEvent.venue">
          <span class="detail-label">Venue</span>
          <span class="detail-value">{{ selectedEvent.venue }}</span>
        </div>
        
        <!-- Pricing -->
        <div class="detail-item" *ngIf="getEventPricing(selectedEvent)">
          <span class="detail-label">Pricing</span>
          <div class="detail-value pricing-info">
            <div class="pricing-item">
              <span class="pricing-label">Ticket:</span>
              <span class="pricing-amount">â‚¹{{ getEventPricing(selectedEvent)?.ticketPrice }}</span>
            </div>
            <div class="pricing-item" *ngIf="selectedEvent.stayOption && getEventPricing(selectedEvent)?.stayFee">
              <span class="pricing-label">Stay:</span>
              <span class="pricing-amount">â‚¹{{ getEventPricing(selectedEvent)?.stayFee }}</span>
            </div>
          </div>
        </div>

        <!-- Map URL -->
        <div class="detail-item" *ngIf="selectedEvent.mapUrl">
          <span class="detail-label">Location Map</span>
          <a [href]="selectedEvent.mapUrl" target="_blank" class="map-link">
            View on Map
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 17L17 7M17 7H7M17 7V17"/>
            </svg>
          </a>
        </div>

        <!-- Registration Link -->
        <div class="detail-item" *ngIf="selectedEvent.registrationLink">
          <span class="detail-label">Registration</span>
          <a [href]="selectedEvent.registrationLink" target="_blank" class="registration-link">
            Register Now
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 17L17 7M17 7H7M17 7V17"/>
            </svg>
          </a>
        </div>
      </div>

      <!-- Speakers Section -->
      <div *ngIf="selectedEvent.speakers && selectedEvent.speakers.length > 0" class="section-container">
        <h3 class="section-title">Speakers</h3>
        <div class="speakers-grid">
          <div *ngFor="let speaker of selectedEvent.speakers; trackBy: trackBySpeakerId" class="speaker-card">
            <img 
              [src]="getGalleryImage(speaker.photo)" 
              [alt]="speaker.name"
              class="speaker-photo"
              onerror="this.src='assets/images/placeholder-image.png'">
            <div class="speaker-info">
              <h4 class="speaker-name">{{ speaker.name }}</h4>
              <p class="speaker-bio" *ngIf="speaker.bio">{{ speaker.bio }}</p>
              <div class="speaker-social" *ngIf="speaker.socialLinks">
                <a *ngIf="speaker.socialLinks.linkedin" [href]="speaker.socialLinks.linkedin" target="_blank" class="social-link">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sponsors Section -->
      <div *ngIf="selectedEvent.sponsors && selectedEvent.sponsors.length > 0" class="section-container">
        <h3 class="section-title">Sponsors</h3>
        <div class="sponsors-grid">
          <div *ngFor="let sponsor of selectedEvent.sponsors; trackBy: trackBySponsorId" class="sponsor-card">
            <img 
              [src]="getGalleryImage(sponsor.logo)" 
              [alt]="sponsor.name"
              class="sponsor-logo"
              onerror="this.src='assets/images/placeholder-image.png'">
            <div class="sponsor-info">
              <h4 class="sponsor-name">{{ sponsor.name }}</h4>
              <p class="sponsor-tier" [class]="sponsor.tier">{{ sponsor.tier }}</p>
              <p class="sponsor-description" *ngIf="sponsor.description">{{ sponsor.description }}</p>
              <a *ngIf="sponsor.website" [href]="sponsor.website" target="_blank" class="sponsor-website">
                Visit Website
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Gallery Section -->
      <div *ngIf="hasGalleryContent(selectedEvent)" class="section-container gallery-section">
        <h3 class="section-title">Event Gallery</h3>
        
        <!-- Photos -->
        <div *ngIf="getPhotos(selectedEvent).length > 0" class="media-subsection">
          <h4 class="media-title">Photos</h4>
          <div class="media-grid">
            <div 
              *ngFor="let photo of getPhotos(selectedEvent); trackBy: trackByGalleryId"
              class="media-item">
              <img 
                [src]="getGalleryImage(photo.url)"
                [alt]="photo.caption || 'Event photo'"
                  onerror="this.src='assets/images/placeholder-image.png'"
                class="media-thumbnail">
            </div>
          </div>
        </div>
        
        <!-- Videos -->
        <div *ngIf="getVideos(selectedEvent).length > 0" class="media-subsection">
          <h4 class="media-title">Videos</h4>
          <div class="media-grid">
            <div 
              *ngFor="let video of getVideos(selectedEvent); trackBy: trackByGalleryId"
              class="media-item video-item">
              <video 
                [src]="getGalleryImage(video.url)"
                class="media-thumbnail"
                preload="metadata"
                controls>
              </video>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
